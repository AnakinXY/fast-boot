info(
	title: "test api"
	desc: "test api"
	author: "kyle"
	email: "skywalkerwei@gmail.com"
)

type (
	//注册
	RegRequest {
		UserName string `json:"username"`
		Password string `json:"password"`
		Mobile   string `json:"mobile"`
		Age      int64  `json:"age" validate:"gte=1,lte=130"`
	}

	//登陆
	LoginRequest {
		UserName string `json:"username"`
		Password string `json:"password"`
	}

	// 用户信息
	TokenResponse {
		Token string `json:"token"`
	}

	// 用户信息
	UserInfoResponse {
		Id        int64  `json:"uid"`
		NickName  string `json:"nickname"`  //昵称
		AvatarURL string `json:"avatarUrl"` //头像地址
	}
)

@server(
	group: auth
	prefix: /auth
)
service test-api {
	@doc(
		summary: "登录"
	)
	@handler login
	post /login(LoginRequest) returns (TokenResponse)

	@doc(
		summary: "注册"
	)
	@handler Reg
	post /reg(RegRequest) returns (TokenResponse)

	@handler test
	post /test(RegRequest) returns (TokenResponse)

}

//need login
@server(
	group: auth
	jwt: Auth
	prefix: /auth
)
service test-api {
	@doc(
		summary: "获取用户信息"
	)
	@handler me
	get /me returns (UserInfoResponse)

}